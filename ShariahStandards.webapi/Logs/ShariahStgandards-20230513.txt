2023-05-13T00:00:23.2062709+01:00 0HMQJ7I7L5IOT:00000003 [INF] Executed DbCommand ("16"ms) [Parameters=["@p3='?' (DbType = Int32), @p0='?' (Size = 10), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OneTimePasscodes] SET [Passcode] = @p0, [UtcCreatedDateTime] = @p1, [UtcExpiryDateTime] = @p2
OUTPUT 1
WHERE [Id] = @p3;" (0723d8ff)
2023-05-13T00:01:15.1346523+01:00 0HMQJ7I7L5IOT:00000003 [INF] Executed action "ShariahStandards.org.WebApi.LoginController.SendOneTimePasscode (ShariahStandards.org.WebApi)" in 93982.7678ms (afa2e885)
2023-05-13T00:01:15.1353080+01:00 0HMQJ7I7L5IOT:00000003 [INF] Executed endpoint '"ShariahStandards.org.WebApi.LoginController.SendOneTimePasscode (ShariahStandards.org.WebApi)"' (99874f2b)
2023-05-13T00:01:15.1855338+01:00 0HMQJ7I7L5IOT:00000003 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.AggregateException: One or more errors occurred. (An error occurred while attempting to establish an SSL or TLS connection.

The host name did not match the name given in the server's SSL certificate.
)
 ---> MailKit.Security.SslHandshakeException: An error occurred while attempting to establish an SSL or TLS connection.

The host name did not match the name given in the server's SSL certificate.

 ---> System.Security.Authentication.AuthenticationException: The remote certificate was rejected by the provided RemoteCertificateValidationCallback.
   at System.Net.Security.SslStream.CompleteHandshake(SslAuthenticationOptions sslAuthenticationOptions)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.AuthenticateAsClient(SslClientAuthenticationOptions sslClientAuthenticationOptions)
   at MailKit.Net.Smtp.SmtpClient.Connect(String host, Int32 port, SecureSocketOptions options, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.Connect(String host, Int32 port, SecureSocketOptions options, CancellationToken cancellationToken)
   at MailKit.MailService.Connect(String host, Int32 port, Boolean useSsl, CancellationToken cancellationToken)
   at ShariahStandards.org.Services.OneTimePasscodeService.SendCodeInEmail(OneTimePasscode oneTimePasscode) in C:\Work\GitRepositories\ShariahStandards.org\ShariahStandards.webapi\ShariahStandards.org.Services\OneTimePassCodeService.cs:line 80
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task.Wait(Int32 millisecondsTimeout, CancellationToken cancellationToken)
   at System.Threading.Tasks.Task.Wait()
   at ShariahStandards.org.Services.OneTimePasscodeService.UpdatePasscode(OneTimePasscode oneTimePasscode) in C:\Work\GitRepositories\ShariahStandards.org\ShariahStandards.webapi\ShariahStandards.org.Services\OneTimePassCodeService.cs:line 73
   at ShariahStandards.org.Services.OneTimePasscodeService.SendOneTimePasscode(String email) in C:\Work\GitRepositories\ShariahStandards.org\ShariahStandards.webapi\ShariahStandards.org.Services\OneTimePassCodeService.cs:line 56
   at ShariahStandards.org.WebApi.LoginController.SendOneTimePasscode(SendOTPRequest request) in C:\Work\GitRepositories\ShariahStandards.org\ShariahStandards.webapi\ShariahStandards.org.WebApi\Controllers\LoginController.cs:line 18
   at lambda_method2(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_2>d.MoveNext() in C:\Work\GitRepositories\ShariahStandards.org\ShariahStandards.webapi\ShariahStandards.org.WebApi\Program.cs:line 48
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-05-13T00:01:15.2115375+01:00 0HMQJ7I7L5IOT:00000003 [INF] Request finished HTTP/2 POST https://localhost:7227/SendOneTimePasscode application/json 34 - 500 - text/plain;+charset=utf-8 94080.1748ms (791a596a)
2023-05-13T00:11:06.9105208+01:00 0HMQJ7I7L5IOT:00000005 [INF] Request starting HTTP/2 POST https://localhost:7227/SendOneTimePasscode application/json 34 (ca22a1cb)
2023-05-13T00:11:06.9157051+01:00 0HMQJ7I7L5IOT:00000005 [INF] Executing endpoint '"ShariahStandards.org.WebApi.LoginController.SendOneTimePasscode (ShariahStandards.org.WebApi)"' (500cc934)
2023-05-13T00:11:06.9160549+01:00 0HMQJ7I7L5IOT:00000005 [INF] Route matched with "{action = \"SendOneTimePasscode\", controller = \"Login\"}". Executing controller action with signature "ShariahStandards.org.Resources.SimplePostResult SendOneTimePasscode(ShariahStandards.org.Resources.SendOTPRequest)" on controller "ShariahStandards.org.WebApi.LoginController" ("ShariahStandards.org.WebApi"). (122b2fdf)
2023-05-13T00:11:14.1956459+01:00 0HMQJ7I7L5IOT:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=["@__email_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(2) [o].[Id], [o].[Email], [o].[Passcode], [o].[UtcConfirmedDateTime], [o].[UtcCreatedDateTime], [o].[UtcExpiryDateTime]
FROM [OneTimePasscodes] AS [o]
WHERE [o].[Email] = @__email_0" (0723d8ff)
2023-05-13T00:11:16.8082268+01:00 0HMQJ7I7L5IOT:00000005 [INF] Executed DbCommand ("14"ms) [Parameters=["@p3='?' (DbType = Int32), @p0='?' (Size = 10), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [OneTimePasscodes] SET [Passcode] = @p0, [UtcCreatedDateTime] = @p1, [UtcExpiryDateTime] = @p2
OUTPUT 1
WHERE [Id] = @p3;" (0723d8ff)
2023-05-13T00:11:34.0128435+01:00 0HMQJ7I7L5IOT:00000005 [INF] Executed action "ShariahStandards.org.WebApi.LoginController.SendOneTimePasscode (ShariahStandards.org.WebApi)" in 27096.6752ms (afa2e885)
2023-05-13T00:11:34.0130984+01:00 0HMQJ7I7L5IOT:00000005 [INF] Executed endpoint '"ShariahStandards.org.WebApi.LoginController.SendOneTimePasscode (ShariahStandards.org.WebApi)"' (99874f2b)
2023-05-13T00:11:34.0323111+01:00 0HMQJ7I7L5IOT:00000005 [ERR] An unhandled exception has occurred while executing the request. (48a46595)
System.AggregateException: One or more errors occurred. (An error occurred while attempting to establish an SSL or TLS connection.

The host name did not match the name given in the server's SSL certificate.
)
 ---> MailKit.Security.SslHandshakeException: An error occurred while attempting to establish an SSL or TLS connection.

The host name did not match the name given in the server's SSL certificate.

 ---> System.Security.Authentication.AuthenticationException: The remote certificate was rejected by the provided RemoteCertificateValidationCallback.
   at System.Net.Security.SslStream.CompleteHandshake(SslAuthenticationOptions sslAuthenticationOptions)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.AuthenticateAsClient(SslClientAuthenticationOptions sslClientAuthenticationOptions)
   at MailKit.Net.Smtp.SmtpClient.Connect(String host, Int32 port, SecureSocketOptions options, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.Connect(String host, Int32 port, SecureSocketOptions options, CancellationToken cancellationToken)
   at MailKit.MailService.Connect(String host, Int32 port, Boolean useSsl, CancellationToken cancellationToken)
   at ShariahStandards.org.Services.OneTimePasscodeService.SendCodeInEmail(OneTimePasscode oneTimePasscode) in C:\Work\GitRepositories\ShariahStandards.org\ShariahStandards.webapi\ShariahStandards.org.Services\OneTimePassCodeService.cs:line 80
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task.Wait(Int32 millisecondsTimeout, CancellationToken cancellationToken)
   at System.Threading.Tasks.Task.Wait()
   at ShariahStandards.org.Services.OneTimePasscodeService.UpdatePasscode(OneTimePasscode oneTimePasscode) in C:\Work\GitRepositories\ShariahStandards.org\ShariahStandards.webapi\ShariahStandards.org.Services\OneTimePassCodeService.cs:line 73
   at ShariahStandards.org.Services.OneTimePasscodeService.SendOneTimePasscode(String email) in C:\Work\GitRepositories\ShariahStandards.org\ShariahStandards.webapi\ShariahStandards.org.Services\OneTimePassCodeService.cs:line 56
   at ShariahStandards.org.WebApi.LoginController.SendOneTimePasscode(SendOTPRequest request) in C:\Work\GitRepositories\ShariahStandards.org\ShariahStandards.webapi\ShariahStandards.org.WebApi\Controllers\LoginController.cs:line 18
   at lambda_method2(Closure, Object, Object[])
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.SyncObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeNextActionFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_2>d.MoveNext() in C:\Work\GitRepositories\ShariahStandards.org\ShariahStandards.webapi\ShariahStandards.org.WebApi\Program.cs:line 48
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-05-13T00:11:34.0341290+01:00 0HMQJ7I7L5IOT:00000005 [INF] Request finished HTTP/2 POST https://localhost:7227/SendOneTimePasscode application/json 34 - 500 - text/plain;+charset=utf-8 27123.7053ms (791a596a)
